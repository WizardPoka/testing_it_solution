# FarPost Advertisements API

## Описание проекта

FarPost Advertisements API - это RESTful API, разработанное с использованием FastAPI, позволяющее парсить и управлять объявлениями с сайта [FarPost](https://www.farpost.ru). API поддерживает функции создания, чтения, обновления и удаления (CRUD) объявлений, а также предоставляет возможности аутентификации пользователей для безопасного доступа к функциям API.

## Функциональные возможности

- **Парсинг объявлений:** Автоматический парсинг первых 10 объявлений с сайта FarPost и сохранение их в базу данных.
- **CRUD операции с объявлениями:** Создание, чтение, обновление и удаление объявлений.
- **Управление пользователями:** Регистрация и аутентификация пользователей с использованием JWT токенов.

## Установка и запуск

## Шаг 1: Клонирование репозитория

```bash
git clone https://github.com/yourusername/farpost-advertisements-api.git
cd farpost-advertisements-api


## Шаг 2: Создание и активация виртуального окружения

Для создания и активации виртуального окружения используйте следующие команды:

```bash
python -m venv .venv
source .venv/bin/activate   # Для Windows используйте команду .venv\Scripts\activate

## Шаг 3: Установка зависимостей

Установите все необходимые зависимости из файла `requirements.txt` с помощью следующей команды:

```bash
pip install -r requirements.txt

## Шаг 4: Запуск приложения

После установки всех зависимостей, можно запустить сервер FastAPI, используя Uvicorn. Uvicorn — это сервер ASGI, который используется для запуска FastAPI приложений.

Выполните следующую команду для запуска сервера:

```bash
uvicorn app.main:app --reload

## Шаг 5: Использование API

После успешного запуска сервера вы можете использовать API для выполнения различных операций с объявлениями и пользователями. FastAPI предоставляет встроенный интерфейс Swagger UI для тестирования и взаимодействия с вашим API. Доступ к интерфейсу осуществляется по адресу [http://127.0.0.1:8000/docs](http://127.0.0.1:8000/docs).

### Эндпоинты API

Ниже приведены доступные эндпоинты API, их описание и примеры использования:

### 1. **POST /adverts/**

- **Описание:** Создание нового объявления.
- **Запрос:** Отправьте JSON объект с полями `title`, `author`, `views` и `position`.
- **Пример запроса:**


  ```json
  {
    "title": "Установка видеонаблюдения",
    "author": "ООО 'Безопасность'",
    "views": 10,
    "position": 1
  }

### **POST /parse-adverts/**

- **Описание:** 
  - Этот эндпоинт предназначен для парсинга первых 10 объявлений с сайта FarPost.
  - Полученные объявления автоматически сохраняются в базу данных.
  - Эндпоинт не требует параметров запроса.

- **Запрос:**
  - **Параметры:** 
    - В запросе не требуется никаких параметров или тела. Достаточно просто отправить пустой запрос на данный URL.
  - **Заголовок авторизации:** 
    - Запрос требует наличия JWT токена для авторизации, передаваемого в заголовке:
      ```http
      Authorization: Bearer {access_token}
      ```
    - `{access_token}` заменяется реальным токеном, полученным при аутентификации пользователя.

- **Ответ:**
  - **Код ответа:** 
    - `200 OK` — Стандартный код успешного выполнения HTTP запроса.
  - **Тело ответа:** 
    - Возвращает JSON объект с сообщением об успешном парсинге:
      ```json
      {
        "message": "Adverts parsed and saved successfully"
      }
      ```
    - Это сообщение подтверждает, что объявления были успешно спарсены и сохранены в базе данных.

- **Поведение в терминале:**
  - При успешном выполнении запроса в терминале выводится информация о каждом спарсенном объявлении:
    ```plaintext
    Parsed Advert: Title: Видеонаблюдение, СКУД, Views: 9, Position: 1, Author: Невідомий
    Parsed Advert: Title: Ремонт/Настройка видеонаблюдения, Views: 340, Position: 2, Author: Невідомий
    ...
    ```
  - **Title:** Название объявления, полученное с сайта FarPost.
  - **Views:** Количество просмотров объявления, отображаемое на сайте.
  - **Position:** Позиция объявления в списке (от 1 до 10).
  - **Author:** Автор объявления (в некоторых случаях может быть отсутствовать или заменён на "Невідомий").

